import React, { Component } from 'react';
import { Link } from 'react-router-dom';
import Swal from 'sweetalert2'


function createPDF() {

  var name= localStorage.getItem("username");
  var userId = localStorage.getItem("id");
  var emai = localStorage.getItem("email");
  var avoid1 = document.getElementById('avoid1');
  var avoid2 = document.getElementById('avoid1');
 
  avoid1.style.display="none";
  avoid2.style.display="none";
  
  var summary = document.getElementById('tab-cards').innerHTML;
  
  var sTable1 = document.getElementById('tab1').innerHTML;
  var sTable2 = document.getElementById('tab2').innerHTML;
  var sTable3 = document.getElementById('tab3').innerHTML;
  var sTable4 = document.getElementById('tab4').innerHTML;
  var profile = document.getElementById('profile').innerHTML;
  
  

  var style = "<style>";
  style = style + "table {width: 100%;font: 17px Calibri;} body{font-size:12px}";
  style = style + "table, th, td {border: solid 1px #DDD;color: black ;border-collapse: collapse;";
  style = style + "padding: 2px 3px;text-align: center;}";
  style = style + "</style>";

  // CREATE A WINDOW OBJECT.
  var win = window.open('', '', 'height=700,width=700');

  win.document.write('<html><head><link rel="stylesheet" href="./css/manager-add-style.css" />');
  win.document.write('<title>Product Report</title>');   // <title> FOR PDF HEADER.
  win.document.write(style);          // ADD STYLE INSIDE THE HEAD TAG.
  win.document.write('</head>');
  win.document.write('<body style="color:black;"> <h1>Fashionista Textiles</h1> Report Generated by Store Manager Portal<br/><h3>Manager Details</h3><b>Username: </b>'+name+'<br/><b>User ID: </b>'+userId+'<br/><b>Email : </b>'+emai+'<h3>Summary</h3>');
  win.document.write(summary);
  win.document.write(profile);  
  win.document.write(sTable1); 
  win.document.write(sTable2); 
  win.document.write(sTable3); 
  win.document.write(sTable4);         // THE TABLE CONTENTS INSIDE THE BODY TAG.
  win.document.write('</body></html>');

  win.document.close(); 	// CLOSE THE CURRENT WINDOW.

  win.print();    // PRINT THE CONTENTS.

  avoid1.style.display="block";
  avoid2.style.display="block";
  
}

export default class Navbar extends Component {

  constructor(props) {

    super(props);
    this.logout = this.logout.bind(this);
    this.showProfile = this.showProfile.bind(this);

  }


  logout() {

    localStorage.setItem('manager_token', null);

    localStorage.setItem('username', null);
    localStorage.setItem('id', null);
    localStorage.setItem('email', null);

    const token = localStorage.getItem('manager_token');

    console.log("Logout method called : Token is : ", token);




  }

  showProfile(){
    Swal.fire({
      title: '<strong>Profile Details</strong>',
      icon: 'info',
      html:
        '<b>User ID :</b> '+ localStorage.getItem("id") +'<br/>'+
        '<b>Username :</b> '+ localStorage.getItem("username") +'<br/>'+
        '<b>Email :</b> '+ localStorage.getItem("email") +'<br/>'+'',
        
      showCloseButton: true,
      
      focusConfirm: false,
      confirmButtonText:
        '<i class="fas fa-check-circle"></i> OK',
     
      
    })
  }

  render() {

    return (
      <nav  className="navbar navbar-expand-lg navbar-dark bg-primary">
        <a
          className="navbar-brand"
          href="#"
        > <h1 style={{color:"black"}}>Store Manager          | <b style={{color:"white"}}>{localStorage.getItem("username")} </b>  </h1></a>
        <button
          aria-controls="navbarNavDropdown"
          aria-expanded="false"
          aria-label="Toggle navigation"
          className="navbar-toggler"
          data-target="#navbarNavDropdown"
          data-toggle="collapse"
          type="button"
        >
          <span className="navbar-toggler-icon" />
        </button>
        <div
          className="collapse navbar-collapse"
          id="navbarNavDropdown"
        >
          <ul className="navbar-nav">
          <Link
                className="nav-link"
                to="/dashboard-manager"
                
              > <li className="nav-item active">
             <h4 id="dashboard" style={{ paddingLeft:"50px"}}><i class="zmdi zmdi-view-dashboard"></i> Dashboard    </h4> <span className="sr-only">(current)</span>
            </li></Link>
            <Link
                className="nav-link"
                to="/product-List"
              
              ><li className="nav-item active">
             <h4 id="products" style={{ paddingLeft:"50px"}}>   <i class="zmdi zmdi-shopping-basket"></i> Products     </h4> <span className="sr-only">(current)</span>
            </li></Link>
            <li className="nav-item">
              <Link
                className="nav-link"
                to="/order-list"
                
              ><h4 id="purchases" style={{paddingLeft:"50px"}}>  <i className="zmdi zmdi-shopping-cart" /> Purchases   </h4></Link>
            </li>
            <li className="nav-item">
              <a
                className="nav-link"
                href="#"
              />
            </li>

            <li  style={{paddingLeft:"10%"}} className="nav-item dropdown">


              <a
                aria-expanded="false"
                aria-haspopup="true"
                className="nav-link dropdown-toggle"
                data-toggle="dropdown"
                href="#"
                id="navbarDropdownMenuLink"
              >
                <text style={{ fontSize: '16px', color:"#FFEB3B" }}> <i className="zmdi zmdi-settings" /><b> Settings</b> </text>
              </a>

              <div
                aria-labelledby="navbarDropdownMenuLink"
                className="dropdown-menu"
              >

              <Link
                  className="nav-link"
                  onClick={this.showProfile}  >
                <a a style={{ color: "#2196F3" }}
                  className="dropdown-item"
                  
                ><i className="fas fa-user-circle" /> Profile</a></Link>
                <Link
                  className="nav-link"
                  onClick={this.logout} to="/manager-Sign-In/" >
                  
                    <a style={{ color: "#F44336" }}
                      className="dropdown-item"
                      href="#"
                    >
                      <i className="fas fa-sign-out-alt" /> Log Out</a>
                    
                    </Link>

                    <Link
                  className="nav-link"
                  onClick={createPDF} >
                <a style={{ color: "#7B1FA2" }}
                      className="dropdown-item"
                      href="#"
                    >
                      <i class="fas fa-file-alt"></i> Generate Report </a></Link>
              </div>
            </li>
          </ul>
        </div>
      </nav>








    )





  }





} 
